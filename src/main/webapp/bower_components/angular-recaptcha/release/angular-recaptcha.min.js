/**
 * angular-recaptcha build:2016-04-05 
 * https://github.com/vividcortex/angular-recaptcha 
 * Copyright (c) 2016 VividCortex 
**/

!function(a){"use strict";a.module("vcRecaptcha",[])}(angular),function(a){"use strict";function b(){throw new Error('You need to set the "key" attribute to your public reCaptcha key. If you don\'t have a key, please get one from https://www.google.com/recaptcha/admin/create')}var c=a.module("vcRecaptcha");c.provider("vcRecaptchaService",function(){var c=this,d={};c.onLoadFunctionName="vcRecaptchaApiLoaded",c.setDefaults=function(a){angular.copy(d,a)},c.setSiteKey=function(a){d.key=a},c.setTheme=function(a){d.theme=a},c.setStoken=function(a){d.stoken=a},c.setSize=function(a){d.size=a},c.setType=function(a){d.type=a},c.setOnLoadFunctionName=function(a){c.onLoadFunctionName=a},c.$get=["$rootScope","$window","$q",function(e,f,g){function h(){return j?g.when(j):l}function i(){if(!j)throw new Error("reCaptcha has not been loaded yet.")}var j,k=g.defer(),l=k.promise;f.vcRecaptchaApiLoadedCallback=f.vcRecaptchaApiLoadedCallback||[];var m=function(){j=f.grecaptcha,k.resolve(j)};return f.vcRecaptchaApiLoadedCallback.push(m),f[c.onLoadFunctionName]=function(){f.vcRecaptchaApiLoadedCallback.forEach(function(a){a()})},a.isDefined(f.grecaptcha)&&m(),{create:function(a,c){return c.sitekey=c.key||d.key,c.theme=c.theme||d.theme,c.stoken=c.stoken||d.stoken,c.size=c.size||d.size,c.type=c.type||d.type,c.sitekey&&40===c.sitekey.length||b(),h().then(function(b){return b.render(a,c)})},reload:function(a){i(),j.reset(a),e.$broadcast("reCaptchaReset",a)},getResponse:function(a){return i(),j.getResponse(a)}}}]})}(angular),function(a){"use strict";var b=a.module("vcRecaptcha");b.directive("vcRecaptcha",["$document","$timeout","vcRecaptchaService",function(a,b,c){return{restrict:"A",require:"?^^form",scope:{response:"=?ngModel",key:"=?",stoken:"=?",theme:"=?",size:"=?",type:"=?",tabindex:"=?",required:"=?",onCreate:"&",onSuccess:"&",onExpire:"&"},link:function(d,e,f,g){function h(){g&&g.$setValidity("recaptcha",null),k()}function i(){d.response="",j(),d.onExpire({widgetId:d.widgetId})}function j(){g&&g.$setValidity("recaptcha",d.required===!1?null:Boolean(d.response))}function k(){angular.element(a[0].querySelectorAll(".pls-container")).parent().remove()}d.widgetId=null,g&&angular.isDefined(f.required)&&d.$watch("required",j);var l=d.$watch("key",function(a){var g=function(a){b(function(){d.response=a,j(),d.onSuccess({response:a,widgetId:d.widgetId})})};c.create(e[0],{callback:g,key:a,stoken:d.stoken||f.stoken||null,theme:d.theme||f.theme||null,type:d.type||f.type||null,tabindex:d.tabindex||f.tabindex||null,size:d.size||f.size||null,"expired-callback":i}).then(function(a){j(),d.widgetId=a,d.onCreate({widgetId:a}),d.$on("$destroy",h),d.$on("reCaptchaReset",function(b){(angular.isUndefined(b)||a===b)&&(d.response="",j())})}),l()})}}}])}(angular);